<!-- operation.html (FULL) -->
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>V.A.L.O. — Operation</title>
    <link rel="stylesheet" href="operation.css" />
  </head>

  <body>
    <header class="topbar">
      <div class="topbar__inner">V.A.L.O.</div>
    </header>

    <main class="op-page">
      <div class="op-shell">

        <div class="toolbar">
          <div class="toolbar-left">
            <button class="icon-btn" id="undoBtn" title="Undo" aria-label="Undo">↩</button>
            <button class="icon-btn" id="redoBtn" title="Redo" aria-label="Redo">↪</button>
            <button class="ghost-btn" id="cancelBtn" type="button">Cancel</button>
          </div>

          <div class="toolbar-right">
            <button class="primary-btn" id="doneBtn" type="button">Done</button>
          </div>
        </div>

        <section class="op-layout">
          <aside class="panel">
            <div class="tabs" role="tablist" aria-label="Tools">
              <button class="tab is-active" type="button" data-tab="adjust" role="tab" aria-selected="true">Adjust</button>
              <button class="tab" type="button" data-tab="filter" role="tab" aria-selected="false">Filter</button>
              <button class="tab" type="button" data-tab="removebg" role="tab" aria-selected="false">Remove Background</button>
              <button class="tab" type="button" data-tab="crop" role="tab" aria-selected="false">Crop</button>
            </div>

            <!-- Adjust -->
            <section class="tab-panel is-open" data-panel="adjust" role="tabpanel">
              <details class="acc" open>
                <summary class="acc-head">Brightness</summary>
                <div class="acc-body">
                  <input class="range" id="brightness" type="range" min="-100" max="100" value="0" />
                  <div class="value-row">
                    <span class="value-label">value</span>
                    <input class="value-input" id="brightnessInput" type="number" min="-100" max="100" value="0" />
                    <button class="reset-btn" id="brightnessReset" type="button" title="Reset Brightness">⟲</button>
                  </div>
                </div>
              </details>

              <details class="acc" open>
                <summary class="acc-head">Sharpness</summary>
                <div class="acc-body">
                  <input class="range" id="sharpness" type="range" min="-100" max="100" value="0" />
                  <div class="value-row">
                    <span class="value-label">value</span>
                    <input class="value-input" id="sharpnessInput" type="number" min="-100" max="100" value="0" />
                    <button class="reset-btn" id="sharpnessReset" type="button" title="Reset Sharpness">⟲</button>
                  </div>
                </div>
              </details>

              <details class="acc">
                <summary class="acc-head">Noise Reduction</summary>
                <div class="acc-body">
                  <input class="range" id="denoise" type="range" min="0" max="100" value="0" />
                  <div class="value-row">
                    <span class="value-label">value</span>
                    <input class="value-input" id="denoiseInput" type="number" min="0" max="100" value="0" />
                    <button class="reset-btn" id="denoiseReset" type="button" title="Reset Noise Reduction">⟲</button>
                  </div>
                </div>
              </details>
            </section>

            <!-- Filter -->
            <section class="tab-panel" data-panel="filter" role="tabpanel">
              <div class="crop-grid preset-grid" aria-label="Filter presets">
                <button class="crop-btn preset-btn is-active" type="button" data-preset="none">None</button>
                <button class="crop-btn preset-btn" type="button" data-preset="mono">Mono</button>
                <button class="crop-btn preset-btn" type="button" data-preset="dramatic-warm">Dramatic Warm</button>
                <button class="crop-btn preset-btn" type="button" data-preset="noir">Noir</button>
                <button class="crop-btn preset-btn" type="button" data-preset="dramatic-cool">Dramatic Cool</button>
              </div>

              <div class="simple-block">
                <div class="block-title">Red</div>
                <input class="range" id="red" type="range" min="-100" max="100" value="0" />
                <div class="value-row">
                  <span class="value-label">value</span>
                  <input class="value-input" id="redInput" type="number" min="-100" max="100" value="0" />
                  <button class="reset-btn" id="redReset" type="button" title="Reset Red">⟲</button>
                </div>
              </div>

              <div class="simple-block">
                <div class="block-title">Green</div>
                <input class="range" id="green" type="range" min="-100" max="100" value="0" />
                <div class="value-row">
                  <span class="value-label">value</span>
                  <input class="value-input" id="greenInput" type="number" min="-100" max="100" value="0" />
                  <button class="reset-btn" id="greenReset" type="button" title="Reset Green">⟲</button>
                </div>
              </div>

              <div class="simple-block">
                <div class="block-title">Blue</div>
                <input class="range" id="blue" type="range" min="-100" max="100" value="0" />
                <div class="value-row">
                  <span class="value-label">value</span>
                  <input class="value-input" id="blueInput" type="number" min="-100" max="100" value="0" />
                  <button class="reset-btn" id="blueReset" type="button" title="Reset Blue">⟲</button>
                </div>
              </div>
            </section>

            <!-- Remove BG -->
            <section class="tab-panel" data-panel="removebg" role="tabpanel">
              <div class="remove-box">
                <div class="remove-title" id="removeStatus">Ready</div>

                <div class="remove-controls">
                  <button id="removeStartBtn" class="primary-btn" type="button">Start</button>
                  <button id="removeCancelBtn" class="ghost-btn" type="button" disabled>Cancel</button>
                </div>

                <div class="remove-hint">
                  Start makes a preview. Press ✓ beside the image to apply.
                </div>
              </div>
            </section>

            <!-- Crop -->
            <section class="tab-panel" data-panel="crop" role="tabpanel">
              <div class="crop-grid">
                <button class="crop-btn is-active" type="button">Original</button>
                <button class="crop-btn" type="button">Custom</button>
                <button class="crop-btn" type="button">Square</button>

                <button class="crop-btn" type="button">9:16</button>
                <button class="crop-btn" type="button">4:5</button>
                <button class="crop-btn" type="button">5:7</button>

                <button class="crop-btn" type="button">3:4</button>
                <button class="crop-btn" type="button">3:5</button>
                <button class="crop-btn" type="button">2:3</button>
              </div>

              <div class="crop-hint">Choose an aspect ratio to crop.</div>
            </section>
          </aside>

          <!-- Stage -->
          <section class="stage">
            <div class="stage-frame" id="stageFrame">
              <div class="img-wrap" id="imgWrap">
                <img id="mainImage" alt="Selected image" />

                <!-- Crop overlay -->
                <div id="cropOverlay" class="crop-overlay hidden" aria-hidden="true">
                  <div class="shade shade-top"></div>
                  <div class="shade shade-left"></div>
                  <div class="shade shade-right"></div>
                  <div class="shade shade-bottom"></div>

                  <div id="cropBox" class="crop-box" role="application" aria-label="Crop box">
                    <div class="handle h-nw" data-handle="nw"></div>
                    <div class="handle h-ne" data-handle="ne"></div>
                    <div class="handle h-sw" data-handle="sw"></div>
                    <div class="handle h-se" data-handle="se"></div>
                    <div class="handle h-n" data-handle="n"></div>
                    <div class="handle h-s" data-handle="s"></div>
                    <div class="handle h-w" data-handle="w"></div>
                    <div class="handle h-e" data-handle="e"></div>
                  </div>
                </div>
              </div>
            </div>

            <!-- ✅ One universal tick button for ALL modes -->
            <div class="stage-actions">
              <button id="applyBtn" class="primary-btn" type="button" title="Apply (Commit)">✓</button>
            </div>
          </section>
        </section>
      </div>
    </main>

    <div id="saveModal" class="modal hidden" aria-hidden="true">
      <div class="modal__backdrop" data-close="true"></div>
      <div class="modal__card" role="dialog" aria-modal="true" aria-labelledby="saveTitle">
        <h2 id="saveTitle" class="modal__title">Save As</h2>

        <label class="modal__label" for="fileLocation">File Location</label>
        <input id="fileLocation" class="modal__input" type="text" placeholder="e.g. output/image_01.png" />

        <div class="modal__actions">
          <button id="saveBtn" class="modal__btn modal__btn--primary" type="button">Save</button>
          <button id="closeSaveBtn" class="modal__btn modal__btn--ghost" type="button">Cancel</button>
        </div>
      </div>
    </div>

    <script src="app.js"></script>
  </body>
</html>
